<!-- THIS FILE IS AUTOMATICALLY GENERATED, PLEASE DO NOT EDIT IT MANUALLY -->

# System

System commands to manage the connection itself and get updates from the server.

* [disconnect](#disconnect) is the event to send to the server before
stopping the connection. If the client closes the connection without first
sending this event, it will be considered as a client crash by the server.

* [disconnected](#disconnected) is the dual of `disconnect` where the server
is terminating the connection and disconnecting the user. This can happen
if the server detects a timeout, either because no activity on the connection
or the server is expecting a response to a request and hasn't received it (and
all potential retries have been exhausted). `server_error` is sent when the
server encountered a fatal error for the user and the only way to recover is
to reconnect.

* [serverStats](#serverStats) can be used to request generic, user facing data
about the server like number of connecting players.

---
- [disconnect](#disconnect)
- [serverStats](#serverstats)
---

## Disconnect

Ask the server to terminate the connection.

- Endpoint Type: **Request** -> **Response**
- Source: **User**
- Target: **Server**
- Required Scopes: `tachyon.lobby`

### Request

<details>
<summary>JSONSchema</summary>

```json
{
    "title": "SystemDisconnectRequest",
    "tachyon": {
        "source": "user",
        "target": "server",
        "scopes": ["tachyon.lobby"]
    },
    "type": "object",
    "properties": {
        "type": { "const": "request" },
        "messageId": { "type": "string" },
        "commandId": { "const": "system/disconnect" },
        "data": {
            "title": "SystemDisconnectRequestData",
            "type": "object",
            "properties": { "reason": { "type": "string" } },
            "required": ["reason"]
        }
    },
    "required": ["type", "messageId", "commandId"]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "request",
    "messageId": "Duis Lorem",
    "commandId": "system/disconnect",
    "data": {
        "reason": "Duis Lorem"
    }
}
```
</details>

#### TypeScript Definition
```ts
export interface SystemDisconnectRequest {
    type: "request";
    messageId: string;
    commandId: "system/disconnect";
    data?: SystemDisconnectRequestData;
}
export interface SystemDisconnectRequestData {
    reason: string;
}
```
### Response

<details>
<summary>JSONSchema</summary>

```json
{
    "title": "SystemDisconnectResponse",
    "tachyon": {
        "source": "server",
        "target": "user",
        "scopes": ["tachyon.lobby"]
    },
    "anyOf": [
        {
            "title": "SystemDisconnectOkResponse",
            "type": "object",
            "properties": {
                "type": { "const": "response" },
                "messageId": { "type": "string" },
                "commandId": { "const": "system/disconnect" },
                "status": { "const": "success" }
            },
            "required": ["type", "messageId", "commandId", "status"]
        },
        {
            "title": "SystemDisconnectFailResponse",
            "type": "object",
            "properties": {
                "type": { "const": "response" },
                "messageId": { "type": "string" },
                "commandId": { "const": "system/disconnect" },
                "status": { "const": "failed" },
                "reason": {
                    "enum": [
                        "internal_error",
                        "unauthorized",
                        "invalid_request",
                        "command_unimplemented"
                    ]
                },
                "details": { "type": "string" }
            },
            "required": ["type", "messageId", "commandId", "status", "reason"]
        }
    ]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "response",
    "messageId": "consequat Lorem",
    "commandId": "system/disconnect",
    "status": "success"
}
```
</details>

#### TypeScript Definition
```ts
export interface SystemDisconnectOkResponse {
    type: "response";
    messageId: string;
    commandId: "system/disconnect";
    status: "success";
}
```
Possible Failed Reasons: `internal_error`, `unauthorized`, `invalid_request`, `command_unimplemented`

---

## ServerStats

Get server stats such as user count.

- Endpoint Type: **Request** -> **Response**
- Source: **User**
- Target: **Server**
- Required Scopes: `tachyon.lobby`

### Request

<details>
<summary>JSONSchema</summary>

```json
{
    "title": "SystemServerStatsRequest",
    "tachyon": {
        "source": "user",
        "target": "server",
        "scopes": ["tachyon.lobby"]
    },
    "type": "object",
    "properties": {
        "type": { "const": "request" },
        "messageId": { "type": "string" },
        "commandId": { "const": "system/serverStats" }
    },
    "required": ["type", "messageId", "commandId"]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "request",
    "messageId": "commodo Lorem",
    "commandId": "system/serverStats"
}
```
</details>

#### TypeScript Definition
```ts
export interface SystemServerStatsRequest {
    type: "request";
    messageId: string;
    commandId: "system/serverStats";
}
```
### Response

<details>
<summary>JSONSchema</summary>

```json
{
    "title": "SystemServerStatsResponse",
    "tachyon": {
        "source": "server",
        "target": "user",
        "scopes": ["tachyon.lobby"]
    },
    "anyOf": [
        {
            "title": "SystemServerStatsOkResponse",
            "type": "object",
            "properties": {
                "type": { "const": "response" },
                "messageId": { "type": "string" },
                "commandId": { "const": "system/serverStats" },
                "status": { "const": "success" },
                "data": {
                    "title": "SystemServerStatsOkResponseData",
                    "type": "object",
                    "properties": { "userCount": { "type": "integer" } },
                    "required": ["userCount"]
                }
            },
            "required": ["type", "messageId", "commandId", "status", "data"]
        },
        {
            "title": "SystemServerStatsFailResponse",
            "type": "object",
            "properties": {
                "type": { "const": "response" },
                "messageId": { "type": "string" },
                "commandId": { "const": "system/serverStats" },
                "status": { "const": "failed" },
                "reason": {
                    "enum": [
                        "internal_error",
                        "unauthorized",
                        "invalid_request",
                        "command_unimplemented"
                    ]
                },
                "details": { "type": "string" }
            },
            "required": ["type", "messageId", "commandId", "status", "reason"]
        }
    ]
}

```
</details>

<details>
<summary>Example</summary>

```json
{
    "type": "response",
    "messageId": "ut Lorem",
    "commandId": "system/serverStats",
    "status": "success",
    "data": {
        "userCount": -22000000
    }
}
```
</details>

#### TypeScript Definition
```ts
export interface SystemServerStatsOkResponse {
    type: "response";
    messageId: string;
    commandId: "system/serverStats";
    status: "success";
    data: SystemServerStatsOkResponseData;
}
export interface SystemServerStatsOkResponseData {
    userCount: number;
}
```
Possible Failed Reasons: `internal_error`, `unauthorized`, `invalid_request`, `command_unimplemented`

